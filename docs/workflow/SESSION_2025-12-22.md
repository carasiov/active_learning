# Session Summary: 2025-12-22

> **Purpose:** Capture session state for "Document & Clear" restart.
> **Delete after:** Next session successfully bootstraps from this.

---

## What Was Accomplished

### 1. Established Three-Tier Agent Workflow

Defined and documented a multi-agent coordination model:

| Layer | Role | Instance |
|-------|------|----------|
| High-level | Conceptual/mathematical synthesis | GPT-5.2 Thinking (ChatGPT Plus project) |
| Intermediate | Coordination, codebase access, experiments | Claude Code (Opus 4.5) |
| Low-level | Implementation execution | Claude Code or delegated |

### 2. Created Workflow Documentation

- `docs/workflow/README.md` — Full workflow spec including:
  - Three-tier model description
  - High-level agent system instructions (copy-pasteable)
  - High-level agent file list for upload
  - Communication protocol
  - Fast iteration loop diagram

- `docs/projects/decentralized_latents/channel_curriculum/CONTEXT.md` — Comprehensive project briefing merging:
  - Supervisor decisions (authoritative)
  - Mathematical characterization (from high-level agent)
  - Open questions, priorities, gotchas
  - Monitoring checklist, code pointers

### 3. Synced with High-Level Agent

Established communication protocol:
- **When intermediate asks for direction:** Include current factorization, objective, component definition, how labels enter, concrete symptom
- **When high-level needs verification:** Phrase as testable inspection questions
- **Drift management:** Report changes as diffs, not prose

High-level agent confirmed mathematical characterization:
- System is a **mixture-of-experts VAE with per-component latents** (not VampPrior-driven)
- "Sample all z_k, then select" variant (KL summed over all k, not responsibility-weighted)
- Three forces on routing: reconstruction, KL-to-π, logit-MoG
- τ-classifier is EM-like (stop_gradient on τ)

### 4. Set Up High-Level Agent (ChatGPT Project)

User created the ChatGPT project with:
- System instructions from `docs/workflow/README.md`
- Uploaded files:
  - `CONTEXT.md`
  - `docs/workflow/README.md`
  - `docs/theory/conceptual_model.md`
  - `docs/theory/mathematical_specification.md`
  - `design_contract.md`
  - `high_level_context.md`

### 5. Discovered Environment Capabilities

Intermediate agent (Claude Code) has:
- **2x CUDA GPUs** for training
- **Direct experiment execution** via `poetry run python use_cases/experiments/run_experiment.py`
- **Direct result analysis** — summaries, configs, figures, .npy files

This enables fast iteration without user copy-pasting results.

---

## Key Decisions Made

1. **Workflow documentation lives in `docs/workflow/`** — separate from AGENTS.md (codebase navigation)
2. **Project context docs are per-project** — `docs/projects/*/CONTEXT.md`
3. **High-level agent gets curated files** — not full codebase, receives verification reports
4. **"Document & Clear" pattern adopted** — externalize state to files, don't trust auto-compaction for complex work

---

## Current State

- **Workflow setup:** Complete
- **Documentation:** Complete and cross-referenced
- **High-level agent:** Configured and synced
- **Implementation work:** Not started

---

## Next Steps (for next session)

1. **Read orientation docs:**
   - `docs/workflow/README.md` — understand your role as intermediate agent
   - `docs/projects/decentralized_latents/channel_curriculum/CONTEXT.md` — project briefing

2. **Current priority:** Implement DELEGATION_V2.md fix (make unlocked channels get adopted)
   - Add logit bias during kick window
   - Attenuate logit-MoG when k_active ≤ 1
   - Run experiment to validate

3. **If you need conceptual direction:** User will relay to high-level agent using the protocol in workflow README

---

## Files Modified This Session

```
Created:
  docs/workflow/README.md
  docs/projects/decentralized_latents/channel_curriculum/CONTEXT.md
  docs/workflow/SESSION_2025-12-22.md (this file)

Modified:
  AGENTS.md (added workflow references)
  docs/projects/decentralized_latents/channel_curriculum/README.md (added CONTEXT.md to reading order)
```

---

## Restart Command

After `/clear`, tell the new session:

```
Read these files to bootstrap:
1. docs/workflow/README.md (your role and capabilities)
2. docs/workflow/SESSION_2025-12-22.md (what happened last session)
3. docs/projects/decentralized_latents/channel_curriculum/CONTEXT.md (project briefing)

Then proceed with the current priority: implementing DELEGATION_V2.md
```
